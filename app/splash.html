<!DOCTYPE html>
<html>
    <head>
        <title>LaF</title>
        <!--
        <style>
            body {
                background-color: black;
            }
            #appVersion {
                position: absolute;
                color: white;
                left: 10px;
                top: 10px;
                font-size: 15px;
            }
            #updateStatus {
                position: absolute;
                color: white;
                left: 10px;
                bottom: 10px;
                font-size: 25px;
            }
            #downloadStatus {
                position: absolute;
                color: white;
                left: 10px;
                bottom: 10px;
                font-size: 25px;
            }
        </style>
        -->
    </head>
    <body>
        <div id="appVersion"></div>
        <div id="updateStatus"></div>
        <div id="downloadStatus"></div>
        <script type="text/javascript">
            const { ipcRenderer } = require("electron");

            appv = document.getElementById("appVersion");
            updates = document.getElementById("updateStatus");
            dls = document.getElementById("downloadStatus")

            appv.innerHTML = `LaF v${app.getVersion()}`;

            ipcRenderer.on('checking-for-update', () => {
                updates.innerHTML = "Checking for update...";
            });
            ipcRenderer.on('update-available', (evt, info) => {
                updates.innerHTML = "New update: LaF v" + info.version;
            });
            ipcRenderer.on('update-not-available', () => {
                updates.innerHTML = "This is latest version.";
            });
            ipcRenderer.on('download-progress', (evt, info) => {
                updates.innerHTML = `Downloading now... ${Math.floor(info.percent)}%`;
                dls.innerHTML = `${Math.floor(info.bytesPerSecond / 1000)} kB/s`;
            });
            ipcRenderer.on('update-downloaded', (evt, info) => {
                updates.innerHTML = "Installing LaF v" + info.version;
                dls.innerHTML = ""
            });
            ipcRenderer.on('update-error', () => {
                updates.innerHTML = "Update failed. Try again next time.";
                dls.innerHTML = ""
            });

        </script>
    </body>
</html>